close(fileConn)
cu_ceds6_tsql_sc %<>% sc(., "WF")
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\n.",  ".", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\n\\'",  "\\'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\n\\'",  "\\'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("(\r|\n)\'",  "\'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("(\\r|\\n)\\'",  "\\'", ., perl = T, ignore.case = T)
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
quote(".
' ")
cu_ceds6_tsql_sc %<>% gsub("\\. \n'",  "'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\. \\n'",  "'", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("\\. \\n'",  "'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\. \\n\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\. \\n\\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*\\n\\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*\\n\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*\\n\\\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*(\\n|\\r)\\\\'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
gsub("\\.\\s*(\\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\.\\s*(\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\\.\\s*(\\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\\\.\\s*(\\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\.\\s*(\\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\.\\s*(\\n|\\r)\\\\'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
gsub("\\.\\s*(\\n|\\r)'", "Inst. , @Last", "institution.
' , @l", ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*(\\n|\\r)'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
gsub("\\s*\\.\\s*(\\n|\\r)'", "Inst. , @Last", ".
' , @l", ignore.case = T)
gsub("\\s*\\.\\s*(\\n|\\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("\\.\\s*(\\n|\\r)'",  ".'", ., perl = T, ignore.case = T)
gsub("\s*\.\s*(\n|\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
gsub("\\s*\.\\s*(\n|\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
gsub("\\s*\.\\s*(\n|\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
gsub("\\s*\\.\\s*(\n|\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
gsub("\\s*\\.\\s*(\n|\r)'", "Inst., @Last", ".
' , @l", ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("\\s*\\.\\s*(\n|\r)'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("\\s*\\.\\s*
'",  ".'", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
createUpdate_CEDS6_TSQL <- read_lines("TSQL_camelCase/TSQL_camelCase_completeDebuggedCreateInsert_proofed.sql")
cu_ceds6_tsql_sc <- gsub("([a-z])([A-Z])", "\\1_\\2", createUpdate_CEDS6_TSQL, perl = T)
cu_ceds6_tsql_sc %<>% gsub("\\[CEDS-TSQL-V6\\]",  "\\[CEDS_TSQL_v6sc\\]", .)
cu_ceds6_tsql_sc %<>% gsub("Progress_([ABC])Indicator",  "Progress_\\1_Indicator", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Rating_([ABC])Id",  "Rating_\\1_Id", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Title_I(II)*",  "Title_I\\1_", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Pre_*K(indergarten)*",  "Pre_K\\1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("Title_*1",  "Title_1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("API_*Type",  "API_Type", ., perl = T, ignore.case = T)
sc <- function(dat, ABBR) {
gsub(paste0("('|_|\\[)", ABBR, "([A-Z])"),  paste0("\\1", ABBR, "_\\2"), dat, perl = T)
}
cu_ceds6_tsql_sc %<>% sc(., "EL")
cu_ceds6_tsql_sc %<>% sc(., "K12")
cu_ceds6_tsql_sc %<>% sc(., "ECEAP")
cu_ceds6_tsql_sc %<>% sc(., "IDEA")
cu_ceds6_tsql_sc %<>% sc(., "NCAA")
cu_ceds6_tsql_sc %<>% sc(., "NCES")
cu_ceds6_tsql_sc %<>% sc(., "DIF")
cu_ceds6_tsql_sc %<>% sc(., "IEP")
cu_ceds6_tsql_sc %<>% sc(., "COS")
cu_ceds6_tsql_sc %<>% sc(., "XPK")
cu_ceds6_tsql_sc %<>% sc(., "SCED")
cu_ceds6_tsql_sc %<>% sc(., "LEA")
cu_ceds6_tsql_sc %<>% sc(., "Part_C")
cu_ceds6_tsql_sc %<>% sc(., "Part_B")
cu_ceds6_tsql_sc %<>% sc(., "ISO6392")
cu_ceds6_tsql_sc %<>% sc(., "ISO6393")
cu_ceds6_tsql_sc %<>% sc(., "ISO6395")
cu_ceds6_tsql_sc %<>% sc(., "PS")
cu_ceds6_tsql_sc %<>% sc(., "US")
cu_ceds6_tsql_sc %<>% sc(., "CTE")
cu_ceds6_tsql_sc %<>% sc(., "AE")
cu_ceds6_tsql_sc %<>% sc(., "APIP")
cu_ceds6_tsql_sc %<>% sc(., "IRT")
cu_ceds6_tsql_sc %<>% sc(., "SEA")
cu_ceds6_tsql_sc %<>% sc(., "ANSI")
cu_ceds6_tsql_sc %<>% sc(., "LR")
cu_ceds6_tsql_sc %<>% sc(., "LS")
cu_ceds6_tsql_sc %<>% sc(., "ERS")
cu_ceds6_tsql_sc %<>% sc(., "MEP")
cu_ceds6_tsql_sc %<>% sc(., "PD")
cu_ceds6_tsql_sc %<>% sc(., "QRIS")
cu_ceds6_tsql_sc %<>% sc(., "REAP")
cu_ceds6_tsql_sc %<>% sc(., "RLIS")
cu_ceds6_tsql_sc %<>% sc(., "WF")
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
library(tidyverse)
library(magrittr)
createUpdate_CEDS6_TSQL <- read_lines("TSQL_camelCase/TSQL_camelCase_completeDebuggedCreateInsert_proofed.sql")
cu_ceds6_tsql_sc <- gsub("([a-z])([A-Z])", "\\1_\\2", createUpdate_CEDS6_TSQL, perl = T)
cu_ceds6_tsql_sc %<>% gsub("\\[CEDS-TSQL-V6\\]",  "\\[CEDS_TSQL_v6sc\\]", .)
cu_ceds6_tsql_sc %<>% gsub("Progress_([ABC])Indicator",  "Progress_\\1_Indicator", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Rating_([ABC])Id",  "Rating_\\1_Id", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Title_I(II)*",  "Title_I\\1_", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Pre_*K(indergarten)*",  "Pre_K\\1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("Title_*1",  "Title_1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("API_*Type",  "API_Type", ., perl = T, ignore.case = T)
sc <- function(dat, ABBR) {
gsub(paste0("('|_|\\[)", ABBR, "([A-Z])"),  paste0("\\1", ABBR, "_\\2"), dat, perl = T)
}
cu_ceds6_tsql_sc %<>% sc(., "EL")
cu_ceds6_tsql_sc %<>% sc(., "K12")
cu_ceds6_tsql_sc %<>% sc(., "ECEAP")
cu_ceds6_tsql_sc %<>% sc(., "IDEA")
cu_ceds6_tsql_sc %<>% sc(., "NCAA")
cu_ceds6_tsql_sc %<>% sc(., "NCES")
cu_ceds6_tsql_sc %<>% sc(., "DIF")
cu_ceds6_tsql_sc %<>% sc(., "IEP")
cu_ceds6_tsql_sc %<>% sc(., "COS")
cu_ceds6_tsql_sc %<>% sc(., "XPK")
cu_ceds6_tsql_sc %<>% sc(., "SCED")
cu_ceds6_tsql_sc %<>% sc(., "LEA")
cu_ceds6_tsql_sc %<>% sc(., "Part_C")
cu_ceds6_tsql_sc %<>% sc(., "Part_B")
cu_ceds6_tsql_sc %<>% sc(., "ISO6392")
cu_ceds6_tsql_sc %<>% sc(., "ISO6393")
cu_ceds6_tsql_sc %<>% sc(., "ISO6395")
cu_ceds6_tsql_sc %<>% sc(., "PS")
cu_ceds6_tsql_sc %<>% sc(., "CTE")
cu_ceds6_tsql_sc %<>% sc(., "AE")
cu_ceds6_tsql_sc %<>% sc(., "APIP")
cu_ceds6_tsql_sc %<>% sc(., "IRT")
cu_ceds6_tsql_sc %<>% sc(., "SEA")
cu_ceds6_tsql_sc %<>% sc(., "ANSI")
cu_ceds6_tsql_sc %<>% sc(., "LR")
cu_ceds6_tsql_sc %<>% sc(., "LS")
cu_ceds6_tsql_sc %<>% sc(., "ERS")
cu_ceds6_tsql_sc %<>% sc(., "MEP")
cu_ceds6_tsql_sc %<>% sc(., "PD")
cu_ceds6_tsql_sc %<>% sc(., "QRIS")
cu_ceds6_tsql_sc %<>% sc(., "REAP")
cu_ceds6_tsql_sc %<>% sc(., "RLIS")
cu_ceds6_tsql_sc %<>% sc(., "WF")
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("CENSUSID",  "CENSUS_ID", ., perl = T, ignore.case = T)
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
cu_ceds6_tsql_sc %<>% gsub("USCitizenship",  "US_Citizenship", ., perl = T, ignore.case = T)
createUpdate_CEDS6_TSQL <- read_lines("TSQL_camelCase/TSQL_camelCase_completeDebuggedCreateInsert_proofed.sql")
cu_ceds6_tsql_sc <- gsub("([a-z])([A-Z])", "\\1_\\2", createUpdate_CEDS6_TSQL, perl = T)
cu_ceds6_tsql_sc %<>% gsub("\\[CEDS-TSQL-V6\\]",  "\\[CEDS_TSQL_v6sc\\]", .)
cu_ceds6_tsql_sc %<>% gsub("Progress_([ABC])Indicator",  "Progress_\\1_Indicator", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Rating_([ABC])Id",  "Rating_\\1_Id", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Title_I(II)*",  "Title_I\\1_", ., perl = T)
cu_ceds6_tsql_sc %<>% gsub("Pre_*K(indergarten)*",  "Pre_K\\1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("Title_*1",  "Title_1_", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("API_*Type",  "API_Type", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("CENSUSID",  "CENSUS_ID", ., perl = T, ignore.case = T)
cu_ceds6_tsql_sc %<>% gsub("USCitizenship",  "US_Citizenship", ., perl = T, ignore.case = T)
sc <- function(dat, ABBR) {
gsub(paste0("('|_|\\[)", ABBR, "([A-Z])"),  paste0("\\1", ABBR, "_\\2"), dat, perl = T)
}
cu_ceds6_tsql_sc %<>% sc(., "EL")
cu_ceds6_tsql_sc %<>% sc(., "K12")
cu_ceds6_tsql_sc %<>% sc(., "ECEAP")
cu_ceds6_tsql_sc %<>% sc(., "IDEA")
cu_ceds6_tsql_sc %<>% sc(., "NCAA")
cu_ceds6_tsql_sc %<>% sc(., "NCES")
cu_ceds6_tsql_sc %<>% sc(., "DIF")
cu_ceds6_tsql_sc %<>% sc(., "IEP")
cu_ceds6_tsql_sc %<>% sc(., "COS")
cu_ceds6_tsql_sc %<>% sc(., "XPK")
cu_ceds6_tsql_sc %<>% sc(., "SCED")
cu_ceds6_tsql_sc %<>% sc(., "LEA")
cu_ceds6_tsql_sc %<>% sc(., "Part_C")
cu_ceds6_tsql_sc %<>% sc(., "Part_B")
cu_ceds6_tsql_sc %<>% sc(., "ISO6392")
cu_ceds6_tsql_sc %<>% sc(., "ISO6393")
cu_ceds6_tsql_sc %<>% sc(., "ISO6395")
cu_ceds6_tsql_sc %<>% sc(., "PS")
cu_ceds6_tsql_sc %<>% sc(., "CTE")
cu_ceds6_tsql_sc %<>% sc(., "AE")
cu_ceds6_tsql_sc %<>% sc(., "APIP")
cu_ceds6_tsql_sc %<>% sc(., "IRT")
cu_ceds6_tsql_sc %<>% sc(., "SEA")
cu_ceds6_tsql_sc %<>% sc(., "ANSI")
cu_ceds6_tsql_sc %<>% sc(., "LR")
cu_ceds6_tsql_sc %<>% sc(., "LS")
cu_ceds6_tsql_sc %<>% sc(., "ERS")
cu_ceds6_tsql_sc %<>% sc(., "MEP")
cu_ceds6_tsql_sc %<>% sc(., "PD")
cu_ceds6_tsql_sc %<>% sc(., "QRIS")
cu_ceds6_tsql_sc %<>% sc(., "REAP")
cu_ceds6_tsql_sc %<>% sc(., "RLIS")
cu_ceds6_tsql_sc %<>% sc(., "WF")
fileConn <- file("tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
writeLines(cu_ceds6_tsql_sc, fileConn)
close(fileConn)
secondblock <- read.table(text = "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_clippable.sql"[1:9])
View(secondblock)
View(secondblock)
secondblock <- read_lines("tsql_ceds6_snake_case/tsql_ceds6sc_create_update_clippable.sql", skip = 9000)
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_clippable.sql"
secondblock <- read_lines(clippablefile_path, skip = 9000)
firstblock <- read_lines(clippablefile_path, n_max = 9000)
close(fileConn)
write_lines(firstblock, "tsql_ceds6_snake_case/firstblock.sql")
secondblock <- read_lines(clippablefile_path, skip = 9000, n_max = 10000)
write_lines(secondblock, "tsql_ceds6_snake_case/secondblock.sql")
secondblock <- read_lines(clippablefile_path, skip = 9000, n_max = 1000)
secondblock <- read_lines(clippablefile_path, skip = 9000, n_max = 1000)
write_lines(secondblock, "tsql_ceds6_snake_case/secondblock.sql")
firstblock <- read_lines_raw(clippablefile_path, n_max = 9000)
secondblock <- read_lines(clippablefile_path, skip = 9000, n_max = 9000)
write_lines(secondblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
write_lines(firstblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(secondblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
firstblock <- read_lines_raw(clippablefile_path, n_max = 9000)
firstblock <- read_lines(clippablefile_path, n_max = 9000)
secondblock <- read_lines(clippablefile_path, skip = 9000, n_max = 9000)
write_lines(firstblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(secondblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
thirdblock <- read_lines(clippablefile_path, skip = 18000, n_max = 9000)
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
thirdblock <- read_lines(clippablefile_path, skip = 18000, n_max = 9000)
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
write_lines(cu_ceds6_tsql_sc, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
write_lines(cu_ceds6_tsql_sc, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
write_lines(firstblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_clippable.sql"
firstblock <- read_lines(clippablefile_path, n_max = 8900)
write_lines(firstblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
secondblock <- read_lines(clippablefile_path, skip = 8990, n_max = 9000)
write_lines(cu_ceds6_tsql_sc, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql")
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql"
firstblock <- read_lines(clippablefile_path, n_max = 8900)
write_lines(firstblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
secondblock <- read_lines(clippablefile_path, skip = 8990, n_max = 9000)
write_lines(secondblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
thirdblock <- read_lines(clippablefile_path, skip = 17990, n_max = 9000)
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
thirdblock <- read_lines(clippablefile_path, skip = 17990, n_max = 8894)
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
thirdblock <- read_lines(clippablefile_path, skip = 17990, n_max = 8893)
write_lines(thirdblock, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
17990+9000
thirdblock <- read_lines(clippablefile_path, skip = 26990, n_max = 10000)
thirdblock <- read_lines(clippablefile_path, skip = 17990, n_max = 8893)
block_4 <- read_lines(clippablefile_path, skip = 26990, n_max = 10000)
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql"
block_1 <- read_lines(clippablefile_path, n_max = 8900)
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9000)
block_3 <- read_lines(clippablefile_path, skip = 17990, n_max = 8893)
block_4 <- read_lines(clippablefile_path, skip = 26990, n_max = 10000)
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql"
block_1 <- read_lines(clippablefile_path, n_max = 8900)
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9000)
block_3 <- read_lines(clippablefile_path, skip = 17990, n_max = 8893)
block_4 <- read_lines(clippablefile_path, skip = 26990, n_max = 10000)
17990+9000
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
write_lines(block_3, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
block_4 <- read_lines(clippablefile_path, skip = 26884, n_max = 10000)
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
block_4 <- read_lines(clippablefile_path, skip = 26884, n_max = 9954)
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
block_4 <- read_lines(clippablefile_path, skip = 26884, n_max = 9954)
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
block_4 <- read_lines(clippablefile_path, skip = 26884, n_max = 9955)
write_lines(block_4, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt4.sql")
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36840, n_max = 10000)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36838, n_max = 10000)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36838, n_max = 10000)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36839, n_max = 10000)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36839, n_max = 9989)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_5 <- read_lines(clippablefile_path, skip = 36839, n_max = 9988)
write_lines(block_5, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt5.sql")
block_6 <- read_lines(clippablefile_path, skip = 45443, n_max = 9988)
write_lines(block_6, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt6.sql")
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
block_1 <- read_lines(clippablefile_path, n_max = 8994)
block_2 <- read_lines(clippablefile_path, skip = 8994, n_max = 9006)
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
library(tidyverse)
library(magrittr)
library(tidyverse)
library(magrittr)
clippablefile_path <- "tsql_ceds6_snake_case/tsql_ceds6sc_create_update.sql"
block_1 <- read_lines(clippablefile_path, n_max = 8994)
block_2 <- read_lines(clippablefile_path, skip = 8994, n_max = 9006)
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9006)
block_1 <- read_lines(clippablefile_path, n_max = 8990)
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9006)
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
block_1 <- read_lines(clippablefile_path, n_max = 8990)
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9006)
write_lines(block_1, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt1.sql")
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9005)
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
block_2 <- read_lines(clippablefile_path, skip = 8990, n_max = 9000)
write_lines(block_2, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt2.sql")
block_3 <- read_lines(clippablefile_path, skip = 17990, n_max = 8893)
write_lines(block_3, "tsql_ceds6_snake_case/tsql_ceds6sc_create_update_pt3.sql")
library(tidyverse)
library(readxl)
library(bit64)
read_excel_width <- function(excel_file)
{
require("readxl")
header_length <-
length(readxl:::xlsx_col_names(excel_file))
header_length
}
read_excel_headers <- function(excel_file)
{
require("readxl")
header_row <-
readxl:::xlsx_col_names(excel_file) %>%
.[1:11]
header_row
}
read_excel_coltypes <- function(excel_file)
{
require("readxl")
column_types <-
readxl:::xlsx_col_types(excel_file, nskip = 1, n = 1) %>%
.[1:11]
column_types
}
read_charxl_full <- function(excel_file)
{
require("readxl")
num_columns <- length(readxl:::xlsx_col_types(excel_file, nskip = 0, n = 1))
datasheet <- readxl::read_excel(excel_file,
col_types = rep("text", num_columns),
col_names = F)
datasheet
}
as.double_spprssWrns <- function(variables)
{
suppressWarnings(as.double(variables))
}
as.bigint_spprssWrns <- function(variables)
{
suppressWarnings(as.integer64(variables))
}
read_charxl_data <- function(excel_file)
{
dataOnly <-
read_charxl_full(excel_file) %>%
select(1:11) %>%
mutate_all(funs(as.numeric)) %>% #some vals disappear in some files if str8 to bigint (see 0920.xlsx)
mutate_all(round) %>%
mutate_all(funs(as.integer64)) %>%
filter(!is.na(X11))
dataOnly
}
dataRowCount_excel <- function(excel_file)
{
dataRowCount <-
read_charxl_data(excel_file) %>%
nrow
dataRowCount
}
sumOfColumn_excel <- function(excel_file)
{
sum_of_column <-
read_charxl_data(excel_file) %>%
select(11) %>%
mutate_all(round) %>%
summarise_all(funs(sum)) %>%
mutate_all(funs(as.numeric)) %>%
collect %>%
.[[1]]
sum_of_column
}
csv_convertAllText2bigint <- function (file_)
{
read_charxl_full(paste0(file_,".xlsx")) %>%
select(1:11) %>%
mutate(AmountNumeric = suppressWarnings(as.numeric(.[[ncol(.)]]))) %>% # last col to int
mutate(AmountRounded = round(.[[ncol(.)]])) %>% # round last col
select(1:10, ncol(.)) %>% # select 10 + Corrected Amount
filter(suppressWarnings(!is.na(AmountRounded))) %>%
mutate_all(funs(as.integer64(.))) %>%
write.csv(paste0(file_,".csv"), na = "", row.names = F)
}
chopit <- function(element) {
substr(element, 1, 5)
}
read_csv_data <- function(csv_file)
{
csv_data <-
read.csv(paste0(csv_file, ".csv"),
stringsAsFactors = F,
na.strings = c("", " ", "NA")) %>%
# mutate_all(funs(as.integer_spprssWrns)) #regular
mutate_all(funs(as.double_spprssWrns)) #oversized
csv_data
}
dataRowCount_csv <- function(csv_file)
{
dataRowCount <-
read_csv_data(csv_file) %>%
nrow
dataRowCount
}
sumOfColumn_csv <- function(csv_file)
{
sum_of_column <-
read_csv_data(csv_file) %>%
select(11) %>%
summarise_all(funs(sum)) %>%
collect %>%
.[[1]]
sum_of_column
}
file_extension <- "xlsx"
getwd()
file_path <- "C:/Users/Koyot/Documents/GitHub/readxl_bulkloadR/bulkloadR_staging/"
setwd(file_path)
getwd()
file_names <-
list.files(
path = file_path,
pattern = paste0("*.", file_extension))
print("file_names:")
file_names
cu_ceds6_awsql_sc_orig <- clippablefile_path
library(tidyverse)
library(magrittr)
clippablefile_path <- "awsql_ceds6_snake_case/awsql_ceds6sc_create_update_complete.sql"
cu_ceds6_awsql_sc_orig <- clippablefile_path
cu_ceds6_awsql_sc_orig <- read_lines(clippablefile_path)
